#!/bin/bash
set -eu

echo "Starting RabbitMQ server"

RABBITMQ_DOCKER_IMAGE=rabbitmq-mgt-ubuntu
RABBITMQ_ERLANG_COOKIE="theCookie"

mkdir -p data

docker run -d --name rabbitmq-1 \
  --hostname rabbitmq-1 \
  --mount type=bind,source="$(pwd)/conf",target=/etc/rabbitmq \
  --mount type=bind,source="$(pwd)/data",target=/var/lib/rabbitmq \
  -p 15672:15672 \
  -e RABBITMQ_ERLANG_COOKIE=$RABBITMQ_ERLANG_COOKIE \
  $RABBITMQ_DOCKER_IMAGE

